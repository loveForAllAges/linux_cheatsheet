# Linux Cheatsheet


## Contents
- Main commands
- Process monitoring commands
- Performance monitoring commands
- Networking tools
- Text manipulation
- Troubleshooting tools
- File systems
- CRON


## Main commands
- __cd__: Изменение рабочей директории.
- __chmod__: Управление правами доступа.
- __chown__: Управление владением.
- __cp__: Копирование файлов и каталогов, создание бэкапов. Не удобна при копировании больших файлов, так как нет вывода прогресса копирования.
- __df__: Информация об использовании дискового пространства.
- __dirb__: 
- __du__: 
- __env__: 
- __export__: 
- __fierce__: 
- __find__: 
- __free__: 
- __gunzip__: 
- __gzip__: 
- __head__: Инструмент для отображения первых строк текстового файла.
- __history__: 
- __host__: 
- __ifconfig__: 
- __ip__: 
- __kill__: 
- __less__:
- __locate__:
- __ls__:
- __man__:
- __mkdir__:
- __more__:
- __mount__:
- __mv__:
- __nikto__:
- __pwd__:
- __rm__:
- __service__:
- __ssh__:
- __sudo__:
- __tail__: Инструмент для отображения последней части файла.
- __tar__:
- __touch__:
- __uname__:
- __uptime__:
- __useradd__:
- __userdel__:
- __usermod__:
- __w__:
- __wget__:
- __whatis__:
- __whois__:
- __zip__:


## Process monitoring commands
- __ps__: Сообщает о текущих процессах.
```
ps aux (Все процессы)
ps -AFl (Процессы включающие аргументы командной строки)
ps -AlFH (Все процессы потока в древовидном режиме)
ps -e -o pid,args --forest (Процессы по иерархии)
ps -U user -u user u (Список процессов по владельцу)
ps -p pid -L -o pid,tid,pcpu,state,comm (Все потоки процесса по ID)
ps -e pcpu,cpu,nice,state,cputime,args --sort pcpu | sed ‘/^ 0.0 /d’| tac |head -5 (Топ 5 процессов по использованию CPU)
ps -e -orss=,args= | sort -b -k1,1n | pr -TW$COLUMNS | tac | head -5
ps auxf | sort -nr -k 4 | head -5 (Топ 5 процессов по использованию памяти)

```
- __top__: Отображает отсортированный список системный процессов.
- __htop__: Интерактивный просмотр процессов.
- __atop__: Расширенный интерактивный монитор для просмотра нагрузки на систему.
- __lsof__: Список открытых файлов.


## Performance monitoring commands
- __nmon__: Инструмент для мониторинга производительности, который отображает производительность процессора, памяти, сети, дисков, файловой системы, nfs, ресурсов, микро раздела питания.
- __iostat__: Инструмент для мониторинга статистики ввода-вывода системы для устройств и разделов, который контролирует ввод/вывод системы, наблюдая за временем активности устройств в зависимости от их средней скорости передачи. Отчеты iostat используются для изменения конфигов системы, чтобы повысить баланс ввода/вывода между физическими дисками.
- __sar__: Инструмент для генерации отчета с различной информацией об использовании и активности ресурсов в ОС.
- __vmstat__: Инструмент, который сообщает статистику виртуальной памяти.


## Networking tools
- __traceroute__: Инструмент, который отображает пути, пройденные пакетами по IP-сети, для выявления проблем маршрутизации, задержки сети и потери пакетов.
```
traceroute -6 example.com (Указание использовать IPv6)
traceroute -F example.com (Предотвращение фрагментации пакетов)
```
- __ping__: Инструмент для проверки доступности сетевого хоста, который отправляет ICMP пакеты на хост и ожидает ICMP ответ.
- __mtr__: Инструмент, который объединяет возможности `traceroute` и `ping`.
- __nmap__: Инструмент для обнаружения сетей и аудита безопасности, который сканирует открытые порты, запущенные службы и выявляет уязвимости.
- __netstat__: Инструмент для отображения сетевых подключений, таблицы маршрутизации, статистики сетевого интерфейса, прослушивающих сокетов.
- __ufw__: Инструмент управления брандмауэром.
- __iptables__/__nftables__: Инструмент для управления входящими и исходящими пакетами данных на основе набора правил, которые определяются в таблицах. Цепочки – последовательности правил, которые применяются к пакетам. Действия – решения, которые принимает брандмауэр на основе правил для пакета. Команды – инструкции к действию, которые позволяют добавлять, удалять, сбрасывать все правила, задавать действия по умолчанию. [Примеры ниже](#iptables-examples)
- __tcpdump__: Инструмент для перехвата трафика по критериям, мониторинга сетевой активности, записи пакетов в файл для дальнейшего изучения.
- __dig__: Инструмент для выполнения DNS-запросов и получения ценной информации о доменах, IP-адресах, DNS-записях.
- __scp__: Инструмент для защищенного копирования, который позволяет безопасно копировать файлы и каталоги между двумя местами, обычно между двумя системами. Использует шифрование через ssh соединение.


## Text manipulation
- __awk__:
- __sed__:
- __grep__:
- __sort__:
- __cut__:
- __uniq__:
- __cat__:
- __echo__:
- __fmt__:
- __tr__:
- __nl__:
- __wc__:


## Troubleshooting tools
- __hping__:
- __memdump__:
- __nslookup__:
- __wireshark__:
- __winhex__:
- __npcap__:
- __ipconfig__:
- __masscan__:
- __angry ip scanner__:
- __arp__:
- __ethereal__:
- __route__:
- __curl__:
- __dd__:


## File systems
- __bin__: Двоичные файлы многих основных программ, которые должны присутствовать при монтировании системы.
- __sbin__:Аналогичен bin, но содержит файлы утилит системного администрирования.
- __boot__: Файлы для загрузки системы.
- __dev__: Файлы устройства.
- __etc__: Общесистемные файлы конфигурации для хоста, которые используются администратором системы и службами, такие как файл паролей или файлы настроек сетей.
- __home__: Домашний каталог пользователей.
- __lib__: Библиотеки, необходимые двоичным файлам в каталогах bin, sbin.
- __media__: Медиа файлы. При подключении съемного носителя создается папка в этом каталоге с содержимым носителя.
- __mnt__: Временно смонтированные файлы системы. Используется администратором системы для ручного монтирования файловых систем.
- __opt__: Дополнительные пакеты ПО. Используется проприентарным ПО.
- __proc__: Автоматически сгенерированные файлы системы, которые содержат информацию о запущенных процессах и состоянии ядра.
- __root__: Домашняя директория root.
- __run__: Данные программ во время выполнения (сокеты, ID процессов).
- __srv__: Специфичные данные, обслуживаемые этой системой (Файлы Apache).
- __sys__: Виртуальный диалог, представляющий информацию о системе.
- __tmp__: Временные файлы. При перезагрузке системы содержимое каталога удаляется.
- __usr__: Исполняемые файлы пользовательских программ.
- __var__: Постоянно изменяемые файлы (файлы журналов, кэш программ).


## CRON
### Format
```
[Minute (0..59)] [Hour (0..23)] [Day (1..31)] [Month (1..12)] [Weekday (0..6)] [Command to be executed]
```
### Operators
- __*__: all values.
- __,__: separate individual values.
- __-__: a range of values.
- __/__: divide a value into steps.
### Special strings
- __@reboot__: every reboot.
- __@hourly__: once every hour - same as `0 * * * *`.
- __@daily__: once every day - same as `0 0 * * *`.
- __@midnight__: once every midnight - same as `@daily`.
- __@weekly__: once every week - same as `0 0 * * 0`.
- __@monthly__: once every month - same as `0 0 1 * *`.
- __@yearly__: once every year - same as `0 0 1 1 *`.
### Examples
```
Every 15 mins:
*/15 * * * *

Every 2 hours:
0 */2 * * *

Every week Mon-Sat at 6pm:
0 18 * * 0-6

Every Sat and Sun on 2:10am:
10 2 * * 6,7

Adding tasks easily:
echo “@reboot echo hi” | crontab

Open in editor - optional for another user:
crontab -e [-u user]

List tasks - optional for another user:
crontab -l [-u user]

Delete crontab file - optional for another user:
crontab -r [-u user]
```







## Other
### iptables examples
```
iptables -A INPUT -p tcp --dport 22 -m state --state NEW -m limit --limit 3/min -j ACCEPT (Ограничение скорости трафика к новым SSH-соединениям)
iptables -A INPUT -j LOG --log-prefix “Dropped Packet: “ iptables -A INPUT -j DROP (Логирование всех отброшенных пакетов)
```
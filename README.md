# Шпаргалка по Linux

## Горячие клавиши терминала
- `**CTRL+C**`: Прерывает выполнение текущей команды;
- `**CTRL+D**`: Завершает текущий процесс;
- `**CTRL+Z**`: Приостанавливает выполнение процесса (Продолжить - `fg`);
- `**CTRL+A**`: Перемещает курсор в начало строки;
- `**CTRL+E**`: Перемещает курсор в конец строки;
- `**CTRL+U**`: Удаляет текст от курсора до начала строки;
- `**CTRL+K**`: Удаляет текст от курсора до конца строки;
- `**CTRL+L**`: Очищает экран;
- `**CTRL+R**`: Ищет вводимую строку в истории команд;
- `**CTRL+W**`: Удаляет слово перед курсором;
- `**CTRL+Y**`: Вставляет удаленный текст;
- `**CTRL+P**`: Перемещает курсор на одну строку вверх в истории команд;
- `**CTRL+N**`: Перемещает курсор на одну строку вниз в истории команд;
- `**CTRL+T**`: Меняет местами символы до и после курсора;
- `**CTRL+F**`: Перемещает курсор на одно слово вперед;
- `**CTRL+B**`: Перемещает курсор на одно слово назад;
- `**CTRL+D**`: Удаляет слово после курсора;
- `**Alt+.**`: Вставляет поледний аргумент предыдущей команды;
- `**Tab**`: Автодополнение имен файлов и команд;
- `**CTRL+Alt+Del**`: Перезагрузка системы.

## Команды
### Основные команды
- [**`apt`**](#apt): Работа с пакетами;
- [**`date`**](#date): Системная дата;
- [__`df`__](#df): Информация об использовании дискового пространства;
- [__`dpkg`__](#dpkg): Работа с DEB-пакетами;
- [__`du`__](#du): Определение объема файлов в директории;
- [__`env`__](#env): Вывод переменных среды;
- [__`export`__](#export): Экспорт переменных среды;
- [__`find`__](#find): Поиск файлов по критериям;
- [__`free`__](#free): Информация об оперативной памяти;
- [**`groupadd`**](#groupadd): Создание группы;
- [**`groupdel`**](#groupdel): Удаление группы;
- [**`groupmod`**](#groupmod): Изменение настроек группы;
- [__`gunzip`__](#gunzip): Распаковка gzip архивов;
- [__`gzip`__](#gzip): Сжатие файлов алгоритмом LZ77;
- [__`head`__](#head): Отображение первых строк текстового файла;
- [__`history`__](#history): История введенных команд.
- [__`ip`__](#ip): Вывод сетевых интерфейсов.
- [__`less`__](#less): Вывод контента постранично;
- [__`locate`__](#locate): Поиск файлов и папок;
- [__`man`__](#man): Справочная информация нужной команды;
- [__`mount`__](#mount): Монтирование файловой системы;
- [**`passwd`**](#passwd): Смена пароля пользователя;
- [**`reboot`**:](#reboot) Перезагрузка системы;
- [__`service`__](#service): Управление работой сервисов;
- [**`shutdown`**](#shutdown): Остановка системы;
- [__`sudo`__](#sudo): Использование прав суперпользователя;
- [__`tail`__](#tail): Инструмент для отображения последней части файла;
- [__`tar`__](#tar): Сжатие и распаковка файлов;
- [__`uname`__](#uname): Информация об ОС;
- [__`uptime`__](#uptime): Время работы в системы;
- [__`useradd`__](#useradd): Создание пользователя;
- [__`userdel`__](#userdel): Удаление пользователя;
- [__`usermod`__](#usermod): Изменение пользователя;
- [__`w`__](#w): Список активных пользователей с момента запуска ОС;
- [__`wget`__](#wget): Прямая загрузка файлов через Интернет;
- [__`whatis`__](#whatis): Краткое описание искомой команды;
- [__`whoami`__](#whoami): Имя текущего пользователя;
- [**`which`**](#which): Место запуска исполняемого файла;
- [__`zip`__](#zip): zip упаковка файлов.

### Команды для работы с файлами
- [__`cd`__](#cd): Изменение рабочей директории;
- [__`chmod`__](#chmod): Управление правами доступа;
- [__`chown`__](#chown): Управление владением;
- [__`cp`__](#cp): Копирование файлов и каталогов;
- [__`ls`__](#ls): Вывод содержимого директории;
- [__`mv`__](#mv): Перемещение или переименование файлов;
- [__`mkdir`__](#mkdir): Создание директории;
- [__`rm`__](#rm): Удаление файлов или директорий;
- [__`pwd`__](#pwd): Вывод текущей рабочей директории;
- [__`touch`__](#touch): Создание файлов.

### Команды для управления процессами
- [__`ps`__](#ps): Текущие активные процессы;
- [__`top`__](#top): Отсортированный список текущих системных процессов;
- [__`htop`__](#htop): Интерактивный просмотр процессов;
- [__`kill`__](#kill): Уничтожение активного процесса;
- [**`killall`**](#killall): Уничтожение всех процессов, соответствующих заданным параметрам;
- [__`lsof`__](#lsof): Список открытых файлов.

### Команды мониторинга производительности
- [__`nmon`__](#nmon): Мониторинг производительности процессора, памяти, сети, дисков, файловой системы, ресурсов, микро раздела питания;
- [__`iostat`__](#iostat): Мониторинг статистики ввода-вывода системы для устройств и разделов;
- [__`sar`__](#sar): Генератор отчета с различной информацией об использовании и активности ресурсов в ОС;
- [__`vmstat`__](#vmstat): Статистика виртуальной памяти.

### Сетевые команды
- [__`ifconfig`__](#ifconfig): Информация о сетевых интерфейсах;
- [**`traceroute`**](#traceroute): Отображает пути, пройденные пакетами по IP-сети;
- [__`ping`__](#ping): Проверка доступности сетевого хоста;
- [__`mtr`__](#mtr): Инструмент, который объединяет возможности `traceroute` и `ping`;
- [__`nmap`__](#nmap): Сканирует открытые порты, запущенные службы и выявляет уязвимости;
- [__`netstat`__](#netstat): Сетевые подключения, таблицы маршрутизации, статистика сетевого интерфейса;
- [__`ufw`__](#ufw): Управление брандмауэром;
- [__`iptables`__](#iptables): Управление входящими и исходящими пакетами данных;
- [__`tcpdump`__](#tcpdump): Перехвата трафика, мониторинг сетевой активности;
- [__`ssh`__](#ssh): SSH консоль;
- [__`dig`__](#dig): Получение ценной информации о доменах, IP-адресах, DNS-записях;
- [__`scp`__](#scp): Безопасное копирование файлов и каталогов между двумя системами.

### Команды для управления текстом
- [__`awk`__](#awk): Поиск, обработка и фильтрация текста в файлах;
- [__`sed`__](#sed): Фильтрация и преобразование текста;
- [__`grep`__](#grep): Поиск и фильтрация текста;
- [__`sort`__](#sort): Сортировка строк текстовых файлов;
- [__`cut`__](#cut): Вырезание разделов из каждой строки файлов;
- [__`uniq`__](#uniq): Исключение повторяющихся строк;
- [__`cat`__](#cat): Объединение файлов, отображение содержимого файла;
- [__`echo`__](#echo): Отображение строки текста;
- [__`fmt`__](#fmt): Простое оптимальное форматирование текста;
- [__`tr`__](#tr): Перевод или удаление символов;
- [__`wc`__](#wc): Подсчет количества символов новой строки, слов и байт.  

### Команды для устранения неполадок
- [__`hping`__](#hping): Инструмент для создания пакетов, который позволяет манипулировать и анализировать сетевые пакеты на детальном уровне. Используется для стресс-тестирования, тестирования брандмауэра, сканирования и генерации пакетов;
- __`memdump`__: Инструмент для криминалистического анализа системной памяти. Извлекает ценную информацию из оперативной памяти компьютера во время инцидента или расследования;
- __`nslookup`__: Инструмент для запроса серверов системы доменных имен (DNS) для получения информации о хосте или разрешения IP-адреса;
- __`wireshark`__: Инструмент для захвата и анализа сетевого трафика, который предоставляет подробную информацию о пакетах, протоколах, поведении сети;
- __`winhex`__: Шестнадцатеричный и дисковый редактор для компьютерной криминалистики и восстановления данных;
- __`npcap`__:
- __`masscan`__: Инструмент для сканирования портов. Способен сканировать весь Интернет за несколько минут;
- __`angry ip scanner`__: Инструмент для сканирования портов;
- __`arp`__: Инструмент для отображения ARP таблицы;
- __`ethereal`__: Инструмент для захвата, фильтрации и анализа сетевого трафика;
- __`route`__: Инструмент для управления таблицей IP-маршрутизации;
- [__`curl`__](#curl): Инструмент, который передает данные с использованием различных сетевых протоколов. Используется для тестирования и взаимодействия с веб-сервисами, API-интерфейсами;
- [__`dd`__](#dd): Инструмент для дублирования данных и криминалистической визуализации, который используется для обнаружения доказательств и сохранения цифровых данных для восстановления временных рамок событий. Используется для создания точной копии диска или файла, получения удаленных файлов из образа диска.

## Архитектура файловой системы
**Файловая иерархия Linux** - древовидная структура с единым корнем, в которой дополнительные диски монтируются в существующее дерево.
Файлы с точками считаются скрытыми файлами.

Описание файловой структуры:
- __`bin`__: Двоичные файлы многих основных программ, которые должны присутствовать при монтировании системы.
- __`sbin`__:Аналогичен bin, но содержит файлы утилит системного администрирования.
- __`boot`__: Файлы для загрузки системы.
- __`dev`__: Файлы устройства.
- __`etc`__: Общесистемные файлы конфигурации для хоста, которые используются администратором системы и службами, такие как файл паролей или файлы настроек сетей.
- __`home`__: Домашний каталог пользователей.
- __`lib`__: Библиотеки, необходимые двоичным файлам в каталогах bin, sbin.
- __`media`__: Медиа файлы. При подключении съемного носителя создается папка в этом каталоге с содержимым носителя.
- __`mnt`__: Временно смонтированные файлы системы. Используется администратором системы для ручного монтирования файловых систем.
- __`opt`__: Дополнительные пакеты ПО. Используется проприентарным ПО.
- __`proc`__: Автоматически сгенерированные файлы системы, которые содержат информацию о запущенных процессах и состоянии ядра;
	- **`proc/cpuinfo`**: Информация о процессоре;
	- **`proc/interrupts`**: Информация о прерываниях;
	- **`proc/swaps`**: Информация о файлах подкачки;
	- **`proc/version`**: Информация о версии ядра;
	- **`proc/meminfo`**: Информация об использовании памяти;
	- **`proc/net/dev`**: Информация о сетевых интерфейсах и их статистики;
	- **`proc/mounts`**: Информация о смонтированных файловых системах;
- __`root`__: Домашняя директория root.
- __`run`__: Данные программ во время выполнения (сокеты, ID процессов).
- __`srv`__: Специфичные данные, обслуживаемые этой системой (Файлы Apache).
- __`sys`__: Виртуальный диалог, представляющий информацию о системе.
- __`tmp`__: Временные файлы. При перезагрузке системы содержимое каталога удаляется.
- __`usr`__: Исполняемые файлы пользовательских программ.
- __`var`__: Постоянно изменяемые файлы (файлы журналов, кэш программ).

## CRON
### Формат
```
[Minute] [Hour] [Day] [Month] [Weekday] [Command to be executed]
```
### Операторы
- __`*`__: Все значения;
- __`,`__: Разделяет отдельные значения;
- __`-`__: Диапазон значений;
- __`/`__: Разделяет значения на шаги.
### Специальные строки
- __`@reboot`__: every reboot.
- __`@hourly`__: once every hour - same as `0 * * * *`.
- __`@daily`__: once every day - same as `0 0 * * *`.
- __`@midnight`__: once every midnight - same as `@daily`.
- __`@weekly`__: once every week - same as `0 0 * * 0`.
- __`@monthly`__: once every month - same as `0 0 1 * *`.
- __`@yearly`__: once every year - same as `0 0 1 1 *`.
### Примеры
```bash
# Every 15 mins
*/15 * * * *

# Every 2 hours
0 */2 * * *

# Every week Mon-Sat at 6pm
0 18 * * 0-6

# Every Sat and Sun on 2:10am
10 2 * * 6,7

# Adding tasks easily
echo “@reboot echo hi” | crontab

# Open in editor - optional for another user
crontab -e [-u user]

# List tasks - optional for another user
crontab -l [-u user]

# Delete crontab file - optional for another user
crontab -r [-u user]
```
 
## Примеры
### ps
```bash
# Все процессы
ps aux
# Процессы включающие аргументы командной строки
ps -AFl
# Все процессы потока в древовидном режиме
ps -AlFH
# Процессы по иерархии
ps -e -o pid,args --forest
# Список процессов по владельцу
ps -U user -u user u
# Топ 5 процессов по использованию памяти
ps auxf | sort -nr -k 4 | head -5
```
### top
```bash
# Вывод список процессов в реальном времени
top
```
### htop
```bash
# Интерактивный мониторинг процессов
htop
# Интерактивный мониторинг процесс отсортированных по CPU
htop --sort-key=PERCENT_CPU
# Процессы конкретного пользователя
htop -u username
```
### kill
```bash
# Завершить процесс по идентификатору процесса
kill PID
# Завершить процесс сигналом TERM
kill -TERM PID
# Завершить процесс сигналом KILL
kill -KILL PID
```
### killall
```bash
# Завершить все процессы с определенным именем
killall process_name
# Завершить все процессы, принадлежащие определенному пользователю
killall -u username
# Завершить все процессы сигналом TERM
killall -TERM process_name
```
### lsof
```bash
# Показать все открытые файлы и сокеты
lsof
# Показать открытые файлы для определенного процесса
lsof -p PID
# Найти процесс, который использует определенный порт
lsof -i :port_number
```
### nmon
```bash
# Мониторинг ресурсов
nmon
# Сохранить данные в файл
nmon -f -s 10 -c 144
# Мониторинг дисков
nmon -d
```
### iostat
Контролирует ввод/вывод системы, наблюдая за временем активности устройств в зависимости от их средней скорости передачи. Отчеты iostat используются для изменения конфигов системы, чтобы повысить баланс ввода/вывода между физическими дисками.
```bash
# Статистика по использованию дисков
iostat
# Статистика по использованию процессора
iostat -c
# Статистика по сетевым интерфейсам
iostat -n
```
### sar
```bash
# Статистика по использованию CPU
sar -u
# Статистика по использованию дисков
sar -d
# Статистика по использованию памяти
sar -r
```
### vmstat
```bash
# Статистика использования памяти и процессора
vmstat
# Статистика по вводу/выводу
vmstat -d
# Статистика по памяти каждую секунду 5 раз
vmstat 1 5
```
### ifconfig
```bash
# Информация о всех сетевых устройствах
ifconfig
# Информация о конкретном сетевом устройстве
ifconfig eth0
# Отключить сетевой интерфейс
ifconfig eth0 down
# Включить сетевой интерфейс
ifconfig eth0 up
# Выставить интерфейсу eth0 IP-адрес и маску подсети
ifconfig eth0 192.168.1.1 netmask 255.255.255.0
```
### ping
Отправляет ICMP пакеты на хост и ожидает ICMP ответ.
```bash
# Пинговать сайт
ping example.com
# Выполнить пинг 5 раз
ping -c 5 example.com
# Пинговать с интервалом 2 секунды
ping -i 2 example.com
```
### mtr
```bash
# Комбинация traceroute и ping для поиска более узких мест в маршрутах
mtr example.com
# Результаты без изменения IP в имена
mtr -n example.com
# Использовать реверсивный DNS при отображении результатов
mtr -r example.com
```
### nmap
```bash
# Основное сканирование IP-адреса
nmap 0.0.0.0
# Сканирование конкретного диапазона портов
nmap -p 1-1000 0.0.0.0
# Сканирование с указанием версии служб
nmap -sV 0.0.0.0
```
### netstat
```bash
# Отобразить все установленные сетевые соединения по TCP, UDP без разрешения имен в IP-адреса и PID и имена процессов, обеспечивающих соединения
netstat -tulnp
# Таблица маршрутизации
netstat -r
# Количество активных соединений на порту 80
netstat -an | grep :80 | sort
```
### ufw
```bash
# Статус брандмауэра
ufw status
# Включить брандмауэр
ufw enable
# Запретить доступ к 22 порту
ufw deny 22
```
### iptables
Осуществляется на основе набора правил, которые определяются в таблицах. `nftables` имеет схожий функционал. Цепочки – последовательности правил, которые применяются к пакетам. Действия – решения, которые принимает брандмауэр на основе правил для пакета. Команды – инструкции к действию, которые позволяют добавлять, удалять, сбрасывать все правила, задавать действия по умолчанию.
```bash
# Показать текущие правила
iptables -L
# Вывод таблиц с нумерацией правил
iptables -L -v -n --line-numbers
# Удаление правила из таблицы filter под номером 3
iptables -t filter -D INPUT 3
# Блокировать исходящие HTTP-соединения
iptables -t filter -A OUTPUT -p tcp --dport http -j DROP
# Включить логирование ядром пакетов, проходящих через цепочку INPUT, и добавлением к сообщению префикса DROP INPUT
iptables -t filters -A INPUT -j LOG --log-prefix "DROP INPUT"
# Разрешить входящие соединения на порт 80
iptables -A INPUT -p tcp --dport 80 -j ACCEPT
# Запретить доступ к определенной подсети
iptables -A INPUT -s 0.0.0.0/24 -j DROP
# Ограничение скорости трафика к новым SSH-соединениям
iptables -A INPUT -p tcp --dport 22 -m state --state NEW -m limit --limit 3/min -j ACCEPT
# Логирование всех отброшенных пакетов
iptables -A INPUT -j LOG --log-prefix “Dropped Packet: “ iptables -A INPUT -j DROP
```
### tcpdump
```bash
# Перехват пакетов, проходящих через интерфейс eth0
tcpdump -i eth0
# Перехват пакетов, проходящих через порт 80 без изменения IP в имена
tcpdump -n port 80
# Перехвать 10 пакетов и запись их в файл
tcpdump -c 10 -w capture.pcap
```
### ssh
```bash
# Подключение к удаленному серверу по SSH
ssh user@example.com
# Подключение к удаленному серверу по SSH через порт 2222
ssh -p 2222 user@example.com
# Копирование SSH-ключа на удаленный сервер
ssh-copy-id user@example.com
```
### dig
```bash
# Получить информацию о домене
dig example.com
# Получить только IP-адрес домена
dig +short example.com
# Использовать конкретный DNS-сервер для запроса
dig @0.0.0.0 example.com
```
### scp
Использует шифрование через ssh соединение.
```bash
# Копирование файла на удаленный сервер
scp file user@example.com:/path
# Рекурсивное копирование каталога на удаленный сервер
scp -r folder/ user@example.com:/path
# Копирование файла с сервера на локалку
scp user@example.com:/path/file
```
### awk
Чаще всего используется для выборки из колонок.
```bash
# Вывести первый столбец из файла
awk '{print $1}' file
# Разделить строки с помощью разделителя : и вывести первый и третий столбцы
awk -F: '{print $1, $3}' /etc/passwd
# Вывод нечетных строк файла
cat file | awk 'NR%2==1'
```
### sed
```bash
# Заменить первое вхождение old на new в каждой строке файла
sed 's/old/new/' file
# Вывод 5-10 строк из файла
sed -n '5,10p' file
# Удалить пустые строки файла
sed '/^$/d' file
# Удалить первую строку файла
sed -r '1d' file
# Удалить str из текста файла
sed -e 's/str//g' file
# Заменить последовательность нулей одним нулем
sed -e 's/0*/0/g' file
```
### grep
```bash
# Поиск строк, начинающихся на pattern в файле file
grep ^pattern file
# Поиск строк, содержащих pattern во всех файлах каталога dir
grep pattern -R /dir
# Поиск строк, содержащих pattern
grep "pattern" file
# Поиск строк, содержащих password без учета регистра
grep -i “password” /var/log/syslog
# Поиск IP-адресов в журнале доступа к веб-серверу
grep -E -o “([0-9]{1,3}\.){3}[0-9]{1,3}” /var/log/apache2/access.log
```
### sort
```bash
# Сортировка по алфавиту
sort file
# Сортировка двух файлов
sort file1 file2
# Сортировка файлов, отображая только повторяющиеся строки
sort file1 file2 | uniq -d
# Сортировка файлов, отображая только уникальные строки
sort file1 file2 | uniq -u
# Сортировка в обраном порядке
sort -nr file
```
### cut
```bash
# Вырезать первое поле из файла, разделенного запятыми
cut -d',' -f1 file.csv
# Вырезать символы 1-5 с каждой строки
cut -c1-5 file
```
### uniq
```bash
# Удалить дублирующиеся последовательные строки
uniq file
# Подсчитать количество каждой уникальной строки
uniq -c file
```
### cat
```bash
# Вывод содрежимого файла на экран
cat file
# Объединение двух файлов в один
cat file1 file2 > file3
```
### echo
```bash
# Вывод строки на экран
echo "Hello"
# Очистка файла, запись строки в файл
echo "Hello" > file
# Запись строки в конец файла
echo "Hello" >> file
# Вывод значение переменной окружения
echo $PATH
```
### fmt
```bash
# Форматирование файла для вывода с максимальной шириной строки 80 символов
fmt -w 80 file
```
### tr
```bash
# Преобразовать все символы в файле в верхний регистр
tr '[:lower:]' '[:upper:]' < file
# Преобразововать символы строки hello в верхний регистр
echo "hello" | tr '[:lower:]' '[:upper:]'
```
### wc
```bash
# Посчитать количество строк в файле
wc -l file
# Посчитать количество слов в строке
echo "Hello, world!" | wc -w
```
### traceroute
Используется для выявления проблем маршрутизации, задержки сети и потери пакетов.
```bash
# Маршрут сетевых пакетов до example.com
traceroute example.com
# Указание использовать IPv6
traceroute -6 example.com
# Предотвращение фрагментации пакетов
traceroute -F example.com
# Маршрут без изменения IP в имена
traceroute -n example.com
# Использовать указанный порт при трассировке маршрута
traceroute -p 80 example.com
```
### curl
```
curl -X POST -d “data=sample” https://example.com (Пример POST запроса)
curl -Iv https://example.com (Проверка конфига SSL/TLS)
curl -H “Cookie: session=12345” https://example.com (Отправка cookie)
```
### dd
```bash
# Создание точного образа USB-накопителя и запись его в новый файл
dd if=/dev/sdb1 of=~/usb_drive_image.img bs=4096
```
### hping
```bash
# Традиционный пинг
hping3 -1 127.0.0.1

# SYN-флуд-атака
hping3 --flood -S -p 80 127.0.0.1

# UDP сканирование первых 100 портов
hping3 --udp -p 1-100 127.0.0.1
```
### uname
```bash
# Архитектура процессора
uname -m
# Версия ядра ОС
uname -r
```
### date
```bash
# Текущая дата
date
# Установить системные дату и время ММДДЧЧммГГГГюСС (МесяцДеньЧасМинутыГод.Секунды)
date 123123592024.00
# Форматированный вывод текущей даты
date "+%Y-%m-%d %H:%M:%S %A %B %Y"
# Установка даты и времени через форматированный ввод
date --set="2024-04-28 09:30:00"
```
### shutdown
```bash
# Остановка системы
shutdown -h now
# Запланированная остановка системы
shutdown -h hours:minutes &
# Отмена запланированной остановки системы
shutdown -c
# Перезагрузка системы через 5 минут
shutdown -r +5
```
### ls
```bash
# Файлы и директории содержащие в имени цифры
ls *[0-9]*
# Детальная информация о файлах, каталогах и скрытых файлах в текущем каталоге
ls -la
```
### cd
```bash
# Переход в предыдущую директорию
cd -
# Переход в домашнюю директорию текущего пользователя
cd ~
# Переход в указанную директорию
cd /path/to/file
# Переход в на уровень выше
cd ../
```
### mkdir
```bash
# Создать две директории
mkdir dir1 dir2
# Создать каталог и все промежуточные каталоги
mkdir -p /tmp/dir1/dir2
```
### touch
```bash
# Создать файл
touch file
# Изменить дату и время создания файла, при отсутствии создать файл с такой датой и временем
touch -t 2412315900 file
```
### find
```bash
# Найти файлы и каталоги с именем file1 в каталоге /
find / -name file1
# Найти файлы и каталоги с владельцем user1 в каталоге /
find / -user user1
# Найти файлы и каталоги, имена которых оканчиваются на .bin в каталоге /
find / -name "*.bin"
# Найти файлы в каталоге /, время последнего обращения к которым более 100 дней
find / -type f -atime +100
# Найти файлы в каталоге /, созданные или измененные в течение последних 10 дней
find / -type f -mtime -10
# Найти файлы и каталоги в каталоге /, размер которых больше 1 мбайта
find / -size +1M
```
### mount
```bash
# Монтировать раздел hda2 в точку монтирования /mnt/hda2
mount /dev/hda2 /mnt/hda2
# Монтировать ISO-образ
mount -o loop file.iso /mnt/cdrom
# Все примонтированные файловые системы
mount
```
### du
```bash
# Размер файлов и каталогов в текущем каталоге, отсортированных по размеру
du -ah | sort -rh
# Размер файла
du file
# Размеры всех файлов и каталогов в каталоге
du -sh *
# Размер каждого подкаталога в текущем каталоге
du -h --max-depth=1
```
### useradd
```bash
# Создать пользователя user1, назначить домашний каталог /home/user1, назначить shell /bin/bash, включить в группу admin и добавить комментарий Comment
useradd -c "Comment" -g admin -d /home/user1 -s /bin/bash user1
# Создать пользователя user1
useradd user1
# Создать пользователя с домашним каталогом
useradd -m user1
# Создать пользователя и добавить в группу sudo
useradd -G sudo user1
```
### userdel
```bash
# Удалить пользователя и его каталог
userdel -r user1
```
### usermod
```bash
# Добавить пользователя в группу sudo
usermod -aG sudo user1
# Изменение атрибутов пользователя
usermod -c "User FTP" -g system -d /ftp/user1 -s /bin/nologin user1
```
### chmod
```bash
# Аналогично chmod 777 dir1. Выдать права ugo(User Group Other)+rwx(Read Write eXecute) на директорию dir1
chmod ugo+rwx dir1
# Забрать права у группы и всех остальных все права для директории dir1
chmod go-rmw dir1
# Назначить SUID-бит файлу file1. Дает возможность любому пользователю запускать на выполнение файл с полномочиями владельца файла
chmod u+s file1
# Назначить SGID-бит для файла file1
chmod g+s file1
# Снять SGID-бит для файла file1
chmod g-s file1
# Назначить STIKY-бит для файла file1. Позволяет удалять только владельцам
chmod o+t file1
# Снять STIKY-бит для файла file1
chmod o-t file1
# Рекурсивная установка прав для всех каталогов и файлов в каталоге dir
chmod -R 755 dir
```
### df
```bash
# Информация о дисках системы
df
# Информация о текущем диске в удобном формате
df -h .
```
### dpkg
```bash
# Установить пакет
dpkg -i package.deb
# Удалить пакет из системы
dpkg -r package_name
# Показать все пакеты, установленные в систему
dpkg -l
# Найти пакет, содержащий в имени httpd
dpkg -l | grep httpd
# Информация о конкретном пакете
dpkg -s package_name
# Вывести список файлов, входящих в пакет, установленный в систему
dpkg -L package_name
# Отобразить список файлов, входящих в пакет, который еще не установлен в систему
dpkg --contents package.deb
# Найти пакет, в который входит указанный файл
dpkg -S /bin/ping
```
### env
```bash
# Текущие переменные окружения
env
# Установить переменную окружения
env VARIABLE=value
# Удалить переменную окружения
env -u VARIABLE
```
### export
```bash
# Экспортировать переменную окружения
export VARIABLE=value
# Проверить экспортированные перменные окружения
export
# Сбросить экспортированную переменную окружения
export -n VARIABLE
```
### free
```bash
# Информация об оперативной памяти
free
# Информация об оперативной памяти каждую секунду
free -s 1
```
### groupadd
```bash
# Создать группу
groupadd name
# Создать системную группу
groupadd -r name
```
### groupdel
```bash
# Удалить группу
groupdel name
# Удалить группу без предупреждения
groupdel -f name
# Удалить группу, включая связанные файлы и каталоги
groupdel --remove name
# Удалить группу и перенести файлы в другую группу
groupdel --move-to=backupgroup name
```
### groupmod
```bash
# Изменить название группы
groupmod -n newname oldname
# Изменить GID группы
groupmod -g 1000 name
# Добавить пользователей в группу
groupmod -m -g name user1,user2
# Исключить пользователей из группы
groupmod -g name user1,user2
```
### gunzip
```bash
# Распаковать файл
gunzip file.gz
# Распаковать файл и вывести в файл uncompressed_file
gunzip -c file.gz > uncompressed_file
```
### gzip
```bash
# Сжать файл и создать file.gz
gzip file
```
### head
```bash
# Вывести первые 10 строк файла
head file
# Вывести первые 20 строк файла
head -n 20 file
```
### history
```bash
# Последние 20 выполненных команд
history 20
# Очистить историю команд
history -c
```
### ip
```bash
# Информация о сетевых интерфейсах
ip a
# Таблица маршрутизации
ip route
```
### less
```bash
# Содержимое файла с пролистыванием
less file
# Поиск слова в файле
less file
/pattern
```
### locate
```bash
# Найти файл по названию без учета регистра
locate -i file.txt
# Обновление БД для поиска файлов
updatedb
```
### man
```bash
# Руководство по команде ls
man ls
# Описание системного вызова fork
man 2 fork
```
### passwd
```bash
# Сменить пароль текущего пользователя
passwd
# Сменить пароль пользователя
passwd username
```
### reboot
```bash
# Перезагрузка системы
reboot
```
### service
```bash
# Запуск сервиса nginx
service nginx start
# Статус сервиса ssh
service ssh status
# Остановить сервис Apache2
service apache2 stop
```
### sudo
```bash
# Обновить список пакетов
sudo apt update
# Удалить все файлы журналов
sudo rm -rf /var/log
# Редактировать файл конфигурации nginx
sudo nano /etc/nginx/nginx.conf
```
### tail
```bash
# Последние строки системного журнала
tail /var/log/syslog
# Последние 20 строк журнала доступа Nginx
tail -n 20 /var/log/nginx/access.log
```
### tar
```bash
# Создать сжатый архив из каталога folder
tar -czvf archive.tar.gz folder/
# Распаковать архив
tar -xvf archive.tar
# Показать содержимое архива без распаковки
tar -tf archive.tar
```
### uptime
```bash
# Текущее время, время работы системы, количество пользователей, средняя нагрузка
uptime
```
### w
```bash
# Отображение пользователей в системе и их действия
w
```
### wget
```bash
# Загрузка файла file.tar.gz с сайта
wget http://example.com/file.tar.gz
# Рекурсивная загрузка всего сайта
wget -r http://example.com
# Загрузка файла и сохранение с указанным именем
wget -0 newfile.html http://example.com
```
### whatis
```bash
# Краткое описание команды python
whatis python
```
### whoami
```bash
# Имя текущего пользователя
whoami
```
### which
```bash
# Полный путь к исполняемому файлу python
which python
```
### zip
```bash
# Создание архива из содержимого каталога folder
zip -r archive.zip folder/
# Создание зашифрованного архива с файлом file.txt
zip -e secure.zip file.txt
# Распаковка архива в текущий каталог
unzip archive.zip
```
### apt
```bash
# Обновление информации о пакетах из репозиториев
apt update
# Обновление всех пакетов
apt upgrade
# Очистка локального репозитория
apt clean
# Удаление ранее скачанных, но более ненужных пакетов
apt autoremove
# Удаление пакета из системы, с сохранением конфигурационных файлов
apt remove
# Удаление пакета со всеми зависимостями
apt purge
# Установка пакета
apt install
# Проверить целостность зависимостей
apt check
```
### chown
```bash
# Изменить владельца и группу файла file.txt
chown user:group file.txt
# Рекурсивное изменение владельца файлов и каталогов в каталоге dir
chown -R user:group dir/
# Изменить владельца файла file.txt на user
chown user file.txt
```
### cp
```bash
# Скопировать файл file1 в файл file2
cp file1 file2
# Скопировать каталог dir в каталог dir2 рекурсивно
cp -r dir dir2
```
### mv
```bash
# Переименовать файл
mv file1 file2
# Переместить файл в каталог
mv file1 dir
# Переименовать каталог dir1
mv dir1 dir2
```
### rm
```bash
# Удалить файл
rm file1
# Удалить каталог и его содержимое рекурсивно
rm -r dir
# Удалить каталог и его содержимое рекурсивно принудительно
rm -rf dir
```
### pwd
```bash
# Полный путь текущей директории
pwd
```

# Linux Cheatsheet


## Contents
- Main commands
- Process monitoring commands
- Performance monitoring commands
- Networking tools
- Text manipulation
- Troubleshooting tools
- File systems
- CRON


## Main commands
- __`cd`__: Изменение рабочей директории.
- __`chmod`__: Управление правами доступа.
- __`chown`__: Управление владением.
- __`cp`__: Копирование файлов и каталогов, создание бэкапов. Не удобна при копировании больших файлов, так как нет вывода прогресса копирования.
- __`df`__: Информация об использовании дискового пространства.
- __`dirb`__: 
- __`du`__: 
- __`env`__: 
- __`export`__: 
- __`fierce`__: 
- __`find`__: 
- __`free`__: 
- __`gunzip`__: 
- __`gzip`__: 
- __`head`__: Инструмент для отображения первых строк текстового файла.
- __`history`__: 
- __`host`__: 
- __`ifconfig`__: 
- __`ip`__: 
- __`kill`__: 
- __`less`__:
- __`locate`__:
- __`ls`__:
- __`man`__:
- __`mkdir`__:
- __`more`__:
- __`mount`__:
- __`mv`__:
- __`nikto`__:
- __`pwd`__:
- __`rm`__:
- __`service`__:
- __`ssh`__:
- __`sudo`__:
- __`tail`__: Инструмент для отображения последней части файла.
- __`tar`__:
- __`touch`__:
- __`uname`__:
- __`uptime`__:
- __`useradd`__:
- __`userdel`__:
- __`usermod`__:
- __`w`__:
- __`wget`__:
- __`whatis`__:
- __`whois`__:
- __`zip`__:


## Process monitoring commands
- __`ps`__: Сообщает о текущих процессах. [Примеры ниже](#ps-examples)
- __`top`__: Отображает отсортированный список системный процессов.
- __`htop`__: Интерактивный просмотр процессов.
- __`atop`__: Расширенный интерактивный монитор для просмотра нагрузки на систему.
- __`lsof`__: Список открытых файлов.


## Performance monitoring commands
- __`nmon`__: Инструмент для мониторинга производительности, который отображает производительность процессора, памяти, сети, дисков, файловой системы, nfs, ресурсов, микро раздела питания.
- __`iostat`__: Инструмент для мониторинга статистики ввода-вывода системы для устройств и разделов, который контролирует ввод/вывод системы, наблюдая за временем активности устройств в зависимости от их средней скорости передачи. Отчеты iostat используются для изменения конфигов системы, чтобы повысить баланс ввода/вывода между физическими дисками.
- __`sar`__: Инструмент для генерации отчета с различной информацией об использовании и активности ресурсов в ОС.
- __`vmstat`__: Инструмент, который сообщает статистику виртуальной памяти.


## Networking tools
- __`traceroute`__: Инструмент, который отображает пути, пройденные пакетами по IP-сети, для выявления проблем маршрутизации, задержки сети и потери пакетов. [Примеры ниже](#traceroute-examples)
- __`ping`__: Инструмент для проверки доступности сетевого хоста, который отправляет ICMP пакеты на хост и ожидает ICMP ответ.
- __`mtr`__: Инструмент, который объединяет возможности `traceroute` и `ping`.
- __`nmap`__: Инструмент для обнаружения сетей и аудита безопасности, который сканирует открытые порты, запущенные службы и выявляет уязвимости.
- __`netstat`__: Инструмент для отображения сетевых подключений, таблицы маршрутизации, статистики сетевого интерфейса, прослушивающих сокетов.
- __`ufw`__: Инструмент управления брандмауэром.
- __`iptables`__/__`nftables`__: Инструмент для управления входящими и исходящими пакетами данных на основе набора правил, которые определяются в таблицах. Цепочки – последовательности правил, которые применяются к пакетам. Действия – решения, которые принимает брандмауэр на основе правил для пакета. Команды – инструкции к действию, которые позволяют добавлять, удалять, сбрасывать все правила, задавать действия по умолчанию. [Примеры ниже](#iptables-examples)
- __`tcpdump`__: Инструмент для перехвата трафика по критериям, мониторинга сетевой активности, записи пакетов в файл для дальнейшего изучения. [Примеры ниже](#tcpdump-examples)
- __`dig`__: Инструмент для выполнения DNS-запросов и получения ценной информации о доменах, IP-адресах, DNS-записях.
- __`scp`__: Инструмент для защищенного копирования, который позволяет безопасно копировать файлы и каталоги между двумя местами, обычно между двумя системами. Использует шифрование через ssh соединение.


## Text manipulation
- __`awk`__:
- __`sed`__:
- __`grep`__:
- __`sort`__:
- __`cut`__:
- __`uniq`__:
- __`cat`__:
- __`echo`__:
- __`fmt`__:
- __`tr`__:
- __`nl`__:
- __`wc`__:


## Troubleshooting tools
- __`hping`__:
- __`memdump`__:
- __`nslookup`__:
- __`wireshark`__:
- __`winhex`__:
- __`npcap`__:
- __`ipconfig`__:
- __`masscan`__:
- __`angry ip scanner`__:
- __`arp`__:
- __`ethereal`__:
- __`route`__:
- __`curl`__:
- __`dd`__:


## File systems
- __`bin`__: Двоичные файлы многих основных программ, которые должны присутствовать при монтировании системы.
- __`sbin`__:Аналогичен bin, но содержит файлы утилит системного администрирования.
- __`boot`__: Файлы для загрузки системы.
- __`dev`__: Файлы устройства.
- __`etc`__: Общесистемные файлы конфигурации для хоста, которые используются администратором системы и службами, такие как файл паролей или файлы настроек сетей.
- __`home`__: Домашний каталог пользователей.
- __`lib`__: Библиотеки, необходимые двоичным файлам в каталогах bin, sbin.
- __`media`__: Медиа файлы. При подключении съемного носителя создается папка в этом каталоге с содержимым носителя.
- __`mnt`__: Временно смонтированные файлы системы. Используется администратором системы для ручного монтирования файловых систем.
- __`opt`__: Дополнительные пакеты ПО. Используется проприентарным ПО.
- __`proc`__: Автоматически сгенерированные файлы системы, которые содержат информацию о запущенных процессах и состоянии ядра.
- __`root`__: Домашняя директория root.
- __`run`__: Данные программ во время выполнения (сокеты, ID процессов).
- __`srv`__: Специфичные данные, обслуживаемые этой системой (Файлы Apache).
- __`sys`__: Виртуальный диалог, представляющий информацию о системе.
- __`tmp`__: Временные файлы. При перезагрузке системы содержимое каталога удаляется.
- __`usr`__: Исполняемые файлы пользовательских программ.
- __`var`__: Постоянно изменяемые файлы (файлы журналов, кэш программ).


## CRON
### Format
```
[Minute (0..59)] [Hour (0..23)] [Day (1..31)] [Month (1..12)] [Weekday (0..6)] [Command to be executed]
```
### Operators
- __`*`__: all values.
- __`,`__: separate individual values.
- __`-`__: a range of values.
- __`/`__: divide a value into steps.
### Special strings
- __`@reboot`__: every reboot.
- __`@hourly`__: once every hour - same as `0 * * * *`.
- __`@daily`__: once every day - same as `0 0 * * *`.
- __`@midnight`__: once every midnight - same as `@daily`.
- __`@weekly`__: once every week - same as `0 0 * * 0`.
- __`@monthly`__: once every month - same as `0 0 1 * *`.
- __`@yearly`__: once every year - same as `0 0 1 1 *`.
### Examples
```
Every 15 mins:
*/15 * * * *

Every 2 hours:
0 */2 * * *

Every week Mon-Sat at 6pm:
0 18 * * 0-6

Every Sat and Sun on 2:10am:
10 2 * * 6,7

Adding tasks easily:
echo “@reboot echo hi” | crontab

Open in editor - optional for another user:
crontab -e [-u user]

List tasks - optional for another user:
crontab -l [-u user]

Delete crontab file - optional for another user:
crontab -r [-u user]
```







## Other
### iptables examples
```
iptables -A INPUT -p tcp --dport 22 -m state --state NEW -m limit --limit 3/min -j ACCEPT (Ограничение скорости трафика к новым SSH-соединениям)
iptables -A INPUT -j LOG --log-prefix “Dropped Packet: “ iptables -A INPUT -j DROP (Логирование всех отброшенных пакетов)
```
### tcpdump examples
```
tcpdump -i wlo0 -c 10 -n
```
### ps examples
```
ps aux (Все процессы)
ps -AFl (Процессы включающие аргументы командной строки)
ps -AlFH (Все процессы потока в древовидном режиме)
ps -e -o pid,args --forest (Процессы по иерархии)
ps -U user -u user u (Список процессов по владельцу)
ps -p pid -L -o pid,tid,pcpu,state,comm (Все потоки процесса по ID)
ps -e pcpu,cpu,nice,state,cputime,args --sort pcpu | sed ‘/^ 0.0 /d’| tac |head -5 (Топ 5 процессов по использованию CPU)
ps -e -orss=,args= | sort -b -k1,1n | pr -TW$COLUMNS | tac | head -5
ps auxf | sort -nr -k 4 | head -5 (Топ 5 процессов по использованию памяти)
```
### traceroute examples
```
traceroute -6 example.com (Указание использовать IPv6)
traceroute -F example.com (Предотвращение фрагментации пакетов)
```